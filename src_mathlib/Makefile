#=====================================================================
include ../compile/Makefile.config.gen
include ../compile/Makefile.config.charm
#=====================================================================


#===========================================================================
RM    = /bin/rm -f
ECHO  = /bin/echo making
HEAD  = ..
MAIN  = ../main
#===========================================================================


#===========================================================================
FLAGS  = 
MATH   = .
#===========================================================================

#===========================================================================
OBJS_REQ = random_num_gen.o genmatmul.o
include $(BLAS_FORT)
include $(LAPACK_FORT)
include $(EISPACK_FORT)
OBJS = $(OBJS_REQ) $(OBJS_BLAS) $(OBJS_LAPACK) $(OBJS_EISPACK) lst_sort_clean.o
TARGET_LIB = ../binary/libMyMathLib.a
#===========================================================================


#===========================================================================
mymathlib: $(OBJS) 
	$(CHARMC) -o $(TARGET_LIB) $(OBJS) $(LIB) -language charm++ \
        $(OPTS) $(FLAGS)

#===========================================================================


#---------------------------------------------------------------------------
lst_sort_clean.o: $(MATH)/lst_sort_clean.C $(MATH)/mathlib.h
	$(ECHO) $@
	$(CHARMC) -c $(MATH)/lst_sort_clean.C

#---------------------------------------------------------------------------
math_rs.o: $(MATH)/math_rs.f
	$(ECHO) $@
	$(F_COMPILER) -c $(MATH)/math_rs.f
#---------------------------------------------------------------------------
gefa_gesl.o: $(MATH)/gefa_gesl.f
	$(ECHO) $@
	$(F_COMPILER) -c $(MATH)/gefa_gesl.f
#---------------------------------------------------------------------------
random_num_gen.o : $(MATH)/random_num_gen.f
	$(ECHO) $@
	$(F_COMPILER_NOPT) -c $(MATH)/random_num_gen.f
#---------------------------------------------------------------------------
genmatmul.o : $(MATH)/genmatmul.f
	$(ECHO) $@
	$(F_COMPILER) -c $(MATH)/genmatmul.f
#---------------------------------------------------------------------------
dble_blas_stuff.o: $(MATH)/dble_blas_stuff.f
	$(ECHO) $@
	$(F_COMPILER) -c $(MATH)/dble_blas_stuff.f
#---------------------------------------------------------------------------
xerbla.o: $(MATH)/xerbla.f
	$(ECHO) $@
	$(F_COMPILER) -c $(MATH)/xerbla.f
#---------------------------------------------------------------------------
lsame.o: $(MATH)/lsame.f
	$(ECHO) $@
	$(F_COMPILER) -c $(MATH)/lsame.f
#---------------------------------------------------------------------------
dgemm.o: $(MATH)/dgemm.f
	$(ECHO) $@
	$(F_COMPILER) -c $(MATH)/dgemm.f
#---------------------------------------------------------------------------
zgemm.o: $(MATH)/zgemm.f
	$(ECHO) $@
	$(F_COMPILER) -c $(MATH)/zgemm.f
#---------------------------------------------------------------------------
dgemv.o: $(MATH)/dgemv.f
	$(ECHO) $@
	$(F_COMPILER) -c $(MATH)/dgemv.f
#---------------------------------------------------------------------------
zgemv.o: $(MATH)/zgemv.f
	$(ECHO) $@
	$(F_COMPILER) -c $(MATH)/zgemv.f
#---------------------------------------------------------------------------
zdotu.o: $(MATH)/zdotu.f
	$(ECHO) $@
	$(F_COMPILER) -c -g $(MATH)/zdotu.f
#---------------------------------------------------------------------------
dble_lapack_stuff.o: $(MATH)/dble_lapack_stuff.f
	$(ECHO) $@
	$(F_COMPILER) -c $(MATH)/dble_lapack_stuff.f
#---------------------------------------------------------------------------
dopgtr.o: $(MATH)/dopgtr.f
	$(ECHO) $@
	$(F_COMPILER) -c $(MATH)/dopgtr.f
#---------------------------------------------------------------------------
dorg2l.o: $(MATH)/dorg2l.f
	$(ECHO) $@
	$(F_COMPILER) -c $(MATH)/dorg2l.f
#---------------------------------------------------------------------------
dorg2r.o: $(MATH)/dorg2r.f
	$(ECHO) $@
	$(F_COMPILER) -c $(MATH)/dorg2r.f
#---------------------------------------------------------------------------
dspev.o: $(MATH)/dspev.f
	$(ECHO) $@
	$(F_COMPILER) -c $(MATH)/dspev.f
#---------------------------------------------------------------------------
dspmv.o: $(MATH)/dspmv.f
	$(ECHO) $@
	$(F_COMPILER) -c $(MATH)/dspmv.f
#---------------------------------------------------------------------------
dspr2.o: $(MATH)/dspr2.f
	$(ECHO) $@
	$(F_COMPILER) -c $(MATH)/dspr2.f
#---------------------------------------------------------------------------
dsptrd.o: $(MATH)/dsptrd.f
	$(ECHO) $@
	$(F_COMPILER) -c $(MATH)/dsptrd.f
#---------------------------------------------------------------------------
dsteqr.o: $(MATH)/dsteqr.f
	$(ECHO) $@
	$(F_COMPILER) -c $(MATH)/dsteqr.f
#---------------------------------------------------------------------------
dsterf.o: $(MATH)/dsterf.f
	$(ECHO) $@
	$(F_COMPILER) -c $(MATH)/dsterf.f
#===========================================================================


#===========================================================================
clean:	
	$(RM) $(TARGET_LIB) core  *.o
#===========================================================================
